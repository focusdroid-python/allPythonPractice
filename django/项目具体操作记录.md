


## 项目操作流程
```
    1. 
    2. 在test1项目目录里边
    3.在booktest这个目录里边，，在models中写sql
            # django里面自动添加id
            # CharField 说明是一个字符串， max_length指定字符串的最大长度
            btitle = models.CharField(max_length=20)
        
            # 出版日期，DateField说明是一个日期类型
            bpub_date = models.DateField()
            
    4. 生成迁移文件，命令：python manage.py makemigrations
        写完第三步之后，在test1目录中执行--> python manage.py makemigrations
        出现migrations这个目录， 里面的文件就是你之前写好的sql编译之后的编本
        
    5. 执行迁移文件生成表
        python mange.py migrate
        安装   sudo apt install sqliteman 
        就可以打开这个db.sqlite3这个文件了
    6. 
    
```

### 通过模型类操作数据表
```
    进入项目shell的命令
        python manage.py shell
        
    以下为在项目shell终端中演示的例子
    首先导入模型类
        from booktest.models import BookInfo.Herolnfo
        
        ((bj18_python3) focusdroid@focusdroid:~/python/django/test1$ python manage.py shell
            Python 3.6.8 (default, Apr  9 2019, 04:59:38) 
            [GCC 8.3.0] on linux
            Type "help", "copyright", "credits" or "license" for more information.
            (InteractiveConsole)
            >>> from booktest.models import BookInfo  # 导入使用的类
            >>> b = BookInfo() 
            >>> b.btitle = '天龙八部' # 增加字段
            >>> from datetime import date  # 导入日期
            >>> b.bpub_date = date(1990,1,1) # 新增日期字段
            >>> b.save() # 提交保存
            >>> b2 = BookInfo.objects.get(id=1)
            >>> type(b2)
            <class 'booktest.models.BookInfo'>
            >>> b2
            <BookInfo: BookInfo object>
            >>> b2.btitle
            '天龙八部'
            >>> b2.bpub_date
            datetime.date(1990, 1, 1)
            >>> b2.id
            1
            >>> b2.bpub_date = date(1990,10,10)
            >>> b2.save()
            >>> b2.bpub_date
            datetime.date(1990, 10, 10)
            >>> b2.delete()
            
        # 1. 查询表数据
        HeroInfo.objects.get(id=1)
        
        # 2. 查看图书和英雄关联的数据表信息
        b.heroinfo_set.all()


    
```

## 创建英雄类
```
# 英雄人物类
# 英雄名  hname
# 性别  hgender
# 年龄  hage
# 备注  hcomment
# 关系属性 book建立图书类和英雄人物类之间的一对多关系
class HeroInfo(models.Model):
    '''英雄人物模型类'''
    hname = models.CharField(max_length=20) # CharField 字符串
    # x性别 BookInfo说明是bool类型, default 指定默认值，False代表男
    hgender = models.BooleanField(default=False) # BooleanField boolean类型

    # 备注
    hcomment = models.CharField(max_length=128)

    # 关系属性 hbook 建立图书类和英雄人物之间的一对多关系
    hbook = models.ForeignKey('BookInfo')  # ForeignKey 外键
    
    
    
    
   > 2. 生成迁移文件
   python manage.py makemigrations
   
   > 3. 迁移生成表
   python manage.py migrate

```

### 通过模型类操作数据库
```
    > 1. python manage.py shell
    > 2. 导入模型类 
        ### from booktest.models import BookInfo,HeroInfo
            >>> from booktest.models import BookInfo,HeroInfo
            >>> b = BookInfo()
            >>> b.btitle
            ''
            >>> b.btitle = '天龙八部'
            >>> b.btitle
            '天龙八部'
            >>> from datetime import date
            >>> b.bpub_date = date(1990,1,1)
            >>> b.save()
            >>> b.bpub_date
            datetime.date(1990, 1, 1)
            >>> h = HeroInfo()
            >>> h.hname
            ''
            >>> h.hname = '段誉'
            >>> h.hgender = False
            >>> h.hcomment = '六脉神剑'
            >>> h.hbook = b ## 关联外键
            >>> h.save()
```

### 模型类设计
```
    ## 使用django中的管理机制
    > 1. 本地化
        语言和时区的本地化
        修改setting.py文件 LANGUAGE_CODE = 'en-us' 为 LANGUAGE_CODE = 'zh-hans'
    > 2. 创建管理员
        命令： python manage.py createsuperuser
        创建用户 admin
        邮箱    admin@163.com
        密码    admin
        启动  python manage.py runserver
    > 3. 注册模型类
        在应用下的admin中注册模型类
        告诉django框架根据注册的模型类来生成对应表管理页面
        b = BookInfo()
        
        > 3.1 在admin中
            from django.contrib import admin
            from booktest.models import BookInfo,HeroInfo
            
            # Register your models here.
            
            # 注册模型类
            admin.site.register(BookInfo)
            admin.site.register(HeroInfo)
        > 3.2 在models中添加 __str__魔法方法，返回名称，，在管理后台就可以进行操作了
              def __str__(self):
                return self.hname
    》 4 自定义管理页面
        > 4.1 在admin中自定义模型管理类， 模型管理类就是告诉django在生成管理页面上显示哪些内容
            # 自定义模型管理类
            class BookInfoAdmin(admin.ModelAdmin):
                '''图书模型管理类'''
                list_display = ['id', 'btitle', 'bpub_date']
            
            class HeroInfoAdmin(admin.ModelAdmin):
                list_display = ['id', 'hname', 'hcomment']
            
            
            # 注册模型类
            admin.site.register(BookInfo, BookInfoAdmin)
            admin.site.register(HeroInfo, HeroInfoAdmin)
        ## 在127.0.0.1:8000/admin中就可以显示你上面写的字段
        > 4.1 
        > 4.1
        > 4.1

```

## 视图
```
    >1. 在django浏览器请求一个页面，由views处理这个请求，视图函数处理完成之后，要给这个浏览器返回页面内容
    
    >2. 在应用下面的views里面,定义视图函数，视图函数必须有一个request，需要返回一个HttpResponse的类对象，
        from django.http import HttpResponse
        
        # 定义视图函数， HttpResponse
        # http://127.0.0.1:8000/index
        def index(request):
            # 进行处理，和M，T进行交互
            HttpResponse('Hello Django') 
    >3. 进行url配置
         > 3.1 在booktest中新建urls.py文件进行配置
         > 3.2 
            from django.conf.urls import url
            
            urlpatterns = [
                # 通过url函数设置url路由配置
                
            ]
    >4. 在项目的urls配置文件中配置如下
        # 项目的urls文件
        urlpatterns = [
            url(r'^admin/', include(admin.site.urls)), # 配置项
            url(r'^', include('booktest.urls')), # 包含booktest应用中的配置文件
        ]
        
        > 4.1 配置url时，有两种语法格式
            a. url(正则表达式， 视图函数名)
            b. url(正则表达式， include（应用中的urls文件）)
        > 4.1 工作中，不会再项目的urls中配置url，
 
    >5. 在项目的urls.py进行匹配
    >1. 

```
## 模板文件的使用
#### 模板不仅仅是一个html文件
```
    >1. 创建模板文件夹
    >2. 配置项目中的setting里面的TEMPLATES/DIRS中配置
    >3. 使用模板文件
        > 3.1 加载模板文件 
        > 3.2 定义模板上下文 
        > 3.3 模板渲染
        > 3.4 具体查看views.py
    >1. 
    >1. 
```
















































































